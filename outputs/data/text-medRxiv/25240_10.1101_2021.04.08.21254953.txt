medRxiv preprint doi: https://doi.org/10.1101/2021.04.08.21254953; this version posted April 25, 2021. The copyright holder for this preprint
(which was not certified by peer review) is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity.
It is made available under a CC-BY-NC-ND 4.0 International license .

Analysis on Action Tracking Reports of COVID-19 Informs Control
Strategies and Vaccine Delivery in Post-Pandemic Era
Xiaofei Sun1,9 , Tianjia Guan2,9 , Tao Xue3,9 , Chun Fan4,5 , Meng Yang6
Yuxian Meng1 , Tianwei Zhang7 , Bahabaike Jiangtulu3 , Fei Wu8 and Jiwei Li1,8 *
April 25, 2021

Abstract
Understanding the spread of SARS-CoV-2 provides important insights for control policies such as social-distancing
interventions and vaccine delivery in the post-pandemic era. In this work, we take the advantage of action tracking reports
of confirmed COVID-19 patients, which contain the mobility trajectory of patients. We analyzed reports of patients from
April 2020 to January 2021 in China, a country where the residents are well-prepared for the ‚Äúnew normal‚Äù world following
COVID-19 spread. We developed natural language processing (NLP) tools to transform the unstructured text of action-tracking
reports to a structured network of social contacts. An epidemiology model was built on top of the network. Our analysis
provides important insights for the development of control policies. Under the ‚Äúnew normal‚Äù conditions, we find that restaurants,
locations less protected by mask-wearing, have a greater risk than any other location categories, including locations where
people are present at higher densities (e.g., flight). We find that discouraging railway transports is crucial to avoid another wave
of breakout during the Chunyun season (a period of travel in China with extremely high traffic load around the Chinese New
Year) . By formalizing the challenge of finding the optimal vaccine delivery among various different population groups as an
optimization problem, our analysis helps to maximize the efficiency of vaccine delivery under the general situation of vaccine
supply shortage. We are able to reduce the numbers of infections and deaths by 7.4% and 10.5% respectively with vaccine
supply for only 1% of the population. Furthermore, with 10% vaccination rate, the numbers of infections and deaths further
decrease by 52.6% and 78.1% respectively. Our work will be helpful in the design of effective policies regarding interventions,
reopening, contact tracing and vaccine delivery in the ‚Äúnew normal‚Äù world following COVID-19 spread.

1

Main

Understanding the spread of SARS-CoV-2 is important in the ‚Äúnew normal‚Äù world following COVID-19 spread: first, it provides
important insights regarding control policies, such as when and which relocations should be reopened, which are important for
balancing disruptions caused by interventions and reducing transmission. Second, it informs more effective contact tracing
strategies, regarding which groups of people should be tested immediately or quarantined if they have interactions with a
confirmed case. Third, it informs strategies for effective vaccine delivery under the conditions of vaccine shortage.
Many recent efforts have been devoted to modeling SARS-CoV-2 transmission [1, 2, 3, 4, 5, 6, 7, 8, 9]. These recent
efforts have two main limitations. First, there is a lack of first-hand tracking details: existing approaches are mostly focused on
aggregate historical data [10, 11, 12] and simulated data [13, 14], and mobility data [15, 16, 17, 18, 19, 20, 21]. [20] proposed a
method to learn the transmission model by fitting the number of city-level confirmed cases based on the mobility data. However,
mobility data does not contain statistics regarding the number of infections associated with visiting certain locations. These
statistics must be regarded as unknown variables to be further learned by fitting the city-level infection number, which inevitably
introduces substantial noise. Therefore, the model trained based only on mobility data is incapable of capturing these important
aspects; Second, existing efforts are mostly concerned with the first wave of outbreaks rather than the prolonged pandemic
with altered day-to-day human behavior patterns (e.g., mask-wearing). Results and conclusions cannot be extended to the
post-pandemic era, such as the situation in China after April 2020, when the pandemic was generally under control with only
sporadic local outbreaks.
Analyzing actions and tracking of real patients with COVID-19 can facilitate the development of more accurate models
of the spread of SARS-CoV-2, and thus inform more effective policy responses. Here, we propose analyzing action tracking
reports of confirmed cases in China from Apr 2020 to Jan 2021, a period during which the residents are well-prepared for
* 1 Shannon.AI. 2 Chinese Academy of Medical Sciences and Peking Union Medical College. 3 School of Public Health, Peking University Health Science
Centre. 4 Computer Center of Peking University. 5 Peng Cheng Laboratory. 6 MGI, BGI-Shenzhen. 7 Nanyang Technological University. 8 Department of
Computer Science, Zhejiang University. 9 These authors contributed equally: Xiaofei Sun, Tianjia Guan, Tao Xue.

NOTE: This preprint reports new research that has not been certified by peer review and should not be used to guide clinical practice.

1

medRxiv preprint doi: https://doi.org/10.1101/2021.04.08.21254953; this version posted April 25, 2021. The copyright holder for this preprint
(which was not certified by peer review) is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity.
It is made available under a CC-BY-NC-ND 4.0 International license .

the ‚Äúnew normal‚Äù world following COVID-19 spread. Briefly, action tracking reports contain the mobility trajectories of
patients with COVID-19 within the period of 3-14 days before diagnosis. They were published to the public to warn local
residents of places that confirmed patients have been to, but are carefully phrased and structured to preserve the privacy of
confirmed patients and make sure that patients are unidentifiable.1 Action tracking reports serve as a valuable data foundation
for understanding the spread of COVID-19 to inform control and vaccine delivery strategies. We collected reports for a total
number of 1,752 patients from Apr 2020 to Jan 2021 in China, representing approximately 20% of all confirmed cases within
this period.
Hebei Nongxin Building

December 20, 2020

Shenwei Pharmacy

December 31

Youjia Pharmacy

January 1, 2021

tobacco and alcohol supermarket

January 2

No. 10 Rookie Station

January 3

Shijiazhuang No. 3 Hospital

January 4

Shijiazhuang Fifth Hospital

January 7

Hebei Provincial Chest Hospital

January 9

Location

Person

ùëù1

d 140

ùëÜ1

ùëÜ2

ùëÜùëõ

ùê∏1

ùê∏2

ùê∏ùëõ

ùêº1

ùëù2

ùêº2
ùëÑ2

ùëÖ1

ùëÖ2

Rate

Hotel

Barber
Shop
Restaurant Bank

ùëôùëö
‚Ä¶
Connection ‚Ä¶
Network

Susceptible Exposed

S

Patient-Location Edge

ùëô2

ùëÑ1

Exposed

E

‚Ä¶
‚Ä¶

ùêºùëõ

ùëùùëõ

ùëÑùëõ
ùëÖùëõ

Infection
Rate

Infectious

I

Quarantine
Rate

Recovered

R

Quarantined
Recovery
Rate

Infected Node
Location Node

Railway
Station

Q

Shijiazhuang

Person 3
Reported
Prediction basedAge:
on 23
action reports
Prediction based
on
mobility dataGender: Male

120
100
80
60
40
20
0
Èü≥È¢ë‰ø°Âè∑
January 01, 2020
100
80
60
40

Household

Railway
Station

Confirmed Case No.6

Daughter

ùëô1

Person 2

Patient-Patient Edge
City

.

c

Person 3

Colleague

Person 1

Daily confirmed cases

Confirmed Case No. 5

Uninfected Node

b

.

a

Supermarket
Park

Harbin

Person 2
Reported
Prediction
based
on
50
actionAge:
reports
PredictionFemale
based on
Gender:
mobility data

Gender: Female

Confirmed Time: Jan 9

Confirmed Time: Jan 9

60
50
40

Confirmed Time: Jan 15

30

Person 1
Age: 31

20
10
0
ËØÜÂà´ÁªìÊûú
January 31, 2020 January 01, 2020

Suihua

‰ø°Âè∑Â§ÑÁêÜ‰∏é
ÁâπÂæÅÊèêÂèñ

Ëß£Á†ÅÊêúÁ¥¢
Â£∞Â≠¶Ê®°ÂûãÂæóÂàÜ

Èü≥È¢ëÁâπÂæÅ

January 31, 2020
Reported
Prediction based on
action reports
Prediction based on
mobility data

ËØ≠Ë®ÄÊ®°ÂûãÂæóÂàÜ

20

Â£∞Â≠¶Ê®°Âûã
0
January 01, 2020

ËØ≠Ë®ÄÊ®°Âûã

January 31, 2020

Figure 1: a, Using natural language processing (NLP) models to extract structural information from action tracking reports.
Entities including location and time are first extracted from raw tracking reports. Then, based on the extracted entities,
location-time relationships are constructed, forming structured edges between locations and time points. b, Construction of a
mobility network based on the extracted structured information. A node in the network represents a patient or a location, and
time-varying edges are constructed between a patient node and a location node if the patient visited that location at a given time
point. The network also contains statistics of uninfected nodes collected from SmartSteps. Location nodes are divided into 11
categories. c, An SEIR model is trained based on the constructed network by fitting the number of patients visiting certain
locations. Each category of location C is associated with a specific time-consistent transmission rate Œ≤C in the SEIR model. d,
Daily reported cases, predictions made by the proposed model based on action reports, and the predictions made by the baseline
model trained based only on city-level reported cases and mobility data. Curves are smoothed by 5-day average. As shown in
the figure, the model based on action reports can make predictions that are significantly more accurate than the baseline model.
We developed natural language processing (NLP) tools to transform the unstructured text of action tracking reports to a
structured network (shown in Fig.1b), where a time-varying edge connects a person to a location if the patient went to that
location at a given time. An SEIR model is built on top of the network to characterize the spread of coronavirus. Under
the ‚Äúnew normal‚Äù condition, an important factor for transmission rates of different location categories is the strictness of
mask-wearing enforcement, transmission rates are greater for restaurants than for other location categories, and traveling by air
is safer than by rail. We demonstrate how demographic factors (e.g., age, sex and cities of different economic tiers in China)
affect the transmission of coronavirus, and show that the third- and fourth-tier cities have higher infection rates, compared
with the first-tier cities in China. Our study also informs effective strategies for vaccine delivery under conditions of vaccine
shortage. By transforming the problem of finding the optimal vaccine delivery strategy among diverse population groups to an
optimization problem, our study showed that with vaccine supply for only 1% of the population, we are able to decrease total
1 Based on regulations http://www.xinhuanet.com/politics/2021-01/24/c_1127019082.html, reports contain only the tracking
information of patients. Personal information such as names, sexes, ages and addresses that makes patients identifiable is not allowed to be disclosed in the
reports.

2

medRxiv preprint doi: https://doi.org/10.1101/2021.04.08.21254953; this version posted April 25, 2021. The copyright holder for this preprint
(which was not certified by peer review) is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity.
It is made available under a CC-BY-NC-ND 4.0 International license .

infections by 7.4% and total deaths by 10.5%. Furthermore, with 10% vaccination rate, we are able to decrease total infections
by 52.6% and total deaths by 78.1%.
Network Construction Based on Action tracking Reports Action tracking reports exist in a noisy form of large text
chunks, making direct analysis difficult. To address this issue, we developed natural language processing (NLP) tools to
transform the unstructured text of action tracking reports to structured networks, as shown in Fig.1b. The developed NLP
models automatically extract entities of locations visited by patients, ted such as restaurants, railway stations, supermarkets,
hotels, etc, along with the date of the visit. We construct networks based on extracted structured information for patients, where
a node in the network represents a patient or a location (e.g., restaurant, supermarket). A location node has the attribute of its
category. Time-varying edges are constructed between a patient node and a location node if the patient visited the location at
time t. The current network contains only infected people among the visits, and we need statistics regarding other visits not
associated with infections. To achieve this goal, we used SmartSteps, a service that aggregates anonymized location data to
obtain the number of visits to a location within each time period. We divide extracted locations into 11 categories, eight of
which are community locations, i.e., households, workplaces, hotels, shopping-centers/supermarkets, banks, restaurants, parks,
and barber shops/hairdressers, The remaining three are associated with transportation: railway stations/trains, buses/taxis, and
airports/airplanes.
SEIR Model Based on Constructed Network We built the susceptible‚Äìexposed‚Äìinfectious‚Äìremoved (SEIR) model on top
of the constructed network (Fig.1c). Extracted from the reports, the actual quarantine period for confirmed cases is readily
identified in the network. Because action tracking reports contain (almost) all locations that confirmed patients have been
to, and because the number of reports constitutes a relatively large proportion of all infected cases in China, we assume that
contacts between susceptible populations and exposed cases only occur in the locations mentioned in the action tracking reports
of confirmed patients. 2 To characterize the transmission risks of different categories of locations, each category of location C
is associated with a category specific transmission rate Œ≤C in the SEIR model. Œ≤C are time-consistent and free parameters
to be learned based on network observations. The model is optimized using the least-square regression to minimize the gap
between confirmed case counts for each location and predicted number of confirmed cases for that location. Given the trained
SEIR model with learned parameters Œ≤C , we can examine the impacts of different policies by running the SEIR model on the
counterfactual network with features corresponding to the policy.
Risks of Different Location Categories Here we define Rc , which denotes the number of secondary patients caused by
a patient at location c during this single visit if the patient visits location c. Rc can be estimated based on the dataset. As
shown in Fig.2a, the highest value of Rc was obtained for restaurants, followed by supermarkets/grocery-stores, railwaystations/trains, hotels, buses/taxis, workplaces, barber shops/hairdressers, parks, banks and airports/airplanes. Restaurants and
supermarkets/grocery stores have the highest reproduction numbers (R), and restaurants consistently carry greater risks than
supermarkets/grocery stores. This observation is different from the findings in a recent study [20], where restaurants contributed
less to infections over time because of lockdowns, but the contributions of supermarkets/grocery-stores remained steady or
even increased because they are considered as essential businesses. These differences between observations are presumably
because for the study period in this work, mask-wearing has been adopted by almost the entire population. This considerably
differs from the situation considered in the previous research [20]. Therefore, an important factor for the virus transmission is
the strictness of mask-wearing enforcement in certain types of locations. In restaurants, people tend not to wear masks while
eating, and are therefore exposed to greater transmission risks than in grocery-stores. Surprisingly, the transmission rates for
airports/airplanes are lower than other means of transportation (e.g., trains and buses), as well as other community locations
(e.g., restaurants and hotels). We postulate that this is because mask-wearing is strictly enforced on airplanes and in airports,
but less strictly on trains and buses during longer periods of transportation.
2 Another

justification for this assumption is that action reports are collected by city. If one report of a city is found in the collection, it is very likely that
reports for all patients in that city are included.

3

medRxiv preprint doi: https://doi.org/10.1101/2021.04.08.21254953; this version posted April 25, 2021. The copyright holder for this preprint
(which was not certified by peer review) is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity.
It is made available under a CC-BY-NC-ND 4.0 International license .

Transmission rate

0.05

Full visits
1/4 visits
5 Times visits

rai

0.0030
0.0025
0.0020
0.0015

e

s
po

rt/p

lan

nk
air

ba

f

100

98
96

Location

an
e

ba

/pl
ort
air
p

ho
ps
pa
rk
rs

ba
rbe

i
ax

rkp
wo

bu
s/t

lac
e

92

Tier2
Tier3-5

nk
s

Origin
Tier1

e

s

rt/p

lan

nk

ba

air

po

rbe

rs

ba

e

ho
ps
pa
rk

i

lac

ax

rkp
wo

bu
s/t

95
90
85

Tier1
Tier2
Tier3-5

80
75 50%

75%
Number of Visits

g

125

Local location visits
during the Chunyun period (%)

rai

lwa

ys

ba

rs
rbe

rkp

lac

e

ho
ps
pa
rk

i
ax
bu
s/t

wo

t

ion
/tra
ho in
tel

tat

pe

rm
a

rke

t
ran
tau
res

su
100

res
tau
ran
t
su
pe
rm
ark
rai
lwa
et
ys
tat
ion
/tra
ho in
tel

The change of patient number
when reducing 50% visits (%)

Location

102

94

t

su

lwa

0.0035

Location

100

418 infections

870 infections

75
50
25
00

141 infections

541 infections

41 infections

209 infections

The number of patients

Transmission rate

0.0040

d

Tier2 cities
Tier3-5 cities

0.0010

e

tat

res

Location

overall
Tier1 cities

The change of patient number when
varying the number of visits (%)

c

ion
/tra
ho in
tel

t
tau

lan

ran

e

s
nk

po
air

ba

rai

lwa

ys

rt/p

rs
rbe

ba

e

ho
ps
pa
rk

i

lac

ax

rkp

bu
s/t

tat

wo

t

ion
/tra
ho in
tel

t

rke

ran

rm
a

pe

res

0.0015
0.0010

100

su

0.0020

ys

150

0.0025

rke

200

male
female
overall

0.0030

rm
a

0.00
250

0.0035

b

Full Visits

pe

0.10

tau

The change of patient number when
varying the number of visits (%)

Reproduction Rate

a

2413 infections

1678 infections
1080 infections

25
50
75
100
Transport visits during the Chunyun period (%)

125

3000
2500

100%
Railway
Bus
Air
1780

1500
1000

1477

2315

2207

2105

2000

1930

2068

1474

1040

500
0

25%

50%

75%

Transport visits during the Chunyun period

Figure 2: a, Transmission rates for different location categories and changes in total infections when varying the numbers of
visits to different locations. The highest reproduction number R occurs in restaurants (0.11), followed by railway-stations/trains
(0.08), supermarkets/grocery-stores (0.073), and hotels (0.071). Reducing visits to railway-stations/train by 75% leads to the
greatest total infection decrease (-15.7%), followed by restaurants (-14.8%) and supermarkets (-13.2%). Increasing visits by 5
fold has the greatest impact for railway-stations/train (√ó2.45), restaurants (√ó2.21) and supermarkets (√ó2.09). b, Transmission
rates of males and females for different locations. The rates are generally higher for males than for females, and parks were the
only locations where transmission rates were lower for males than for females. c, Transmission rates for different location
categories in cities of different tiers. For community locations, tier2 and tier3-5 cities have significantly higher transmission
risks than tier1 cities. We postulate that this is because temperature tests and mask-wearing are more strictly imposed in tier1
cities. d, Patient number changes when reducing all visits for different city tiers. Reducing visits of all locations in tier1, tier2
and tier3-5 cities with rate Œ∑ = 50% respectively leads to decreases of 12%, 16% and 23% of total infections. e, Changes
in patient numbers when reducing 50% visits for different locations in different cities. In tier3-5 cities, reducing visits to
community locations such as restaurants and supermarkets leads to the greatest decrease in infections, significantly greater
than transportation, but for tier1 cities, transportation if of equal importance to community locations. f, Reducing visits in
community locations and transportations leads to a complementary effect in reducing infections during the Chunyun period.
If the increase in transportation is reduced by half and the visits to community locations are increased √ó2, the number of
infections decreases to 870, compared with original infections 2,431. The number of infections is further decreased to 418
if the increase in transportation is reduced by three quarters Œ∑ = 0.25. With the increase in both community locations and
transportations reduced by three quarters during the Chunyun period, there only remain 41 infections. g, Restriction on air
transport has very limited effects, but restrictions of transport by rail and bus significantly decrease the number of infections.
Effects of Policies Limiting Visits to Different Location Categories To further evaluate the effect of mobility increasing
and decreasing for different types of locations on the overall number of infections, we conducted simulations on counterfactual
networks based on the learned SEIR model. Specifically, we first considered the original network from April 2020 to January
2021. For each category of locations, we constructed counterfactual networks by scaling the magnitude of visits for a single
category of locations, but kept visits to other categories of locations stable. The trained SEIR model was then applied to
the newly constructed counter-factual network to determine the number of infections. Results are shown in Fig.2a. The
number of total infections decreases by 15.7% when reducing visits to railway-stations/trains, followed by restaurants (-14.8%),
supermarkets (-13.2%), workplaces (-9.3%), buses/taxis (-9.1%), hotels (-4.7%), airports/airplanes (-3.2%), parks (-2.1%),
banks (-0.7%), and barber shops/hairdressers (-0.4%). Generally, reducing visits will reduce the number of infections, which
4

medRxiv preprint doi: https://doi.org/10.1101/2021.04.08.21254953; this version posted April 25, 2021. The copyright holder for this preprint
(which was not certified by peer review) is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity.
It is made available under a CC-BY-NC-ND 4.0 International license .

consistent with previous findings [22, 23, 24, 25]. As shown in results, though the transmission rate is lower for railway travel
than for community locations such as restaurants and shopping centers, reducing the frequency of travel is effective in a manner
similar to that of reducing visits to community locations. This is because traveling facilitates coronavirus transmission across
cities, and spreads virus to cities that originally do not have infections. Furthermore, reducing rail travel is substantially more
effective than reducing travel by air (-15.7% vs. -3.2%, respectively). We postulate that this is because transmission rate is
lower for flight travel than for rail travel, as described above. Moreover, the population from bottom-tier cities comprises a
larger proportion of passengers by rail than by flight. As shown below, transmission rates tend to be higher for bottom-tier
cities than for top-tier cities. When the magnitude of visits increases by five fold, we observe √ó2.45 of total infections for
railway-stations/trains, followed by restaurants (√ó2.21), supermarkets (√ó2.09), buses/taxis (√ó1.71), workplaces (√ó1.42),
airports/airplanes (√ó1.41), hotels (√ó1.34), parks (√ó1.21), barber shops/hairdressers (√ó1.09), and banks (√ó1.02).
Economic Tiers of Cities Based on population size, GDP, and administrative hierarchy, the Chinese city tier system3
classifies cities into 5 tiers, with a total number of six categories from tier 1 to 5 with an additional new tier1. We merged tier1
and the new tier1, forming the top-tier category, and tiers 3-5 to form the bottom-tier category, leading to a total number of
three tier categories for cities. Transmission rates for different city tiers are shown in Fig.2c. As can be seen, for categories of
community locations, tier2 and tier3 cities have significantly higher transmission rates, compared with tier1 cities.
Effects of Policies of Limiting Mobility of People in Cities of Different Economic Tiers To examine the influence of
mobility restrictions on distinct location categories in cities within different economic tiers, we performed simulations on
counterfactual networks based on the learned SEIR model. Results are shown in Fig.2d. Reducing visits of all locations in tier1,
tier2 and tier3 cities with rate Œ∑ = 50% respectively leads to decreases of 12%, 16% and 23% in total infections, respectively.
Further simulations were conducted with regard to individual location categories in different cities. Fig.2e shows the results.
For tier3 cities, reducing visits to community locations (e.g., restaurants and supermarkets) leads to the greatest decrease in
the number of infections (significantly greater than transportation). In contrast, for tier1 cities, limitations of transportation
(e.g., travel by rail and air) is equally important to limitations of visits to community locations. We postulate that this is
because people travel more frequently in tier1 cities than in cities of other tiers. Transportation is therefore as risky as visiting
community locations such as restaurants in tier1 cities.
Policies Regarding Chunyun Chunyun is a period of travel in China with extremely high traffic load around the Chinese
New Year. It usually starts before the New Year‚Äôs Day and lasts for approximately 30-40 days. In addition to the marked
increase in traffic loads within and across cities, the intensity of local mobility also increases significantly due to social activities
such as family get-togethers. We used baidu immigration4 to obtain the transportation data for previous years. By comparing
average traffic load in the Chunyun period with that of the whole year, we found that the greatest spikes occur 3 days before the
spring festival, lasting for 3-4 days, and then 4 days after the spring festival lasting for a further 3-5 days. During the spike
period, we observe average increases of √ó5.2 for rail transport, √ó8.9 for road transport, and √ó3.8 for air transport.
To simulate the situation with no interventions taken during the Chunyun period, along with examining the effects of
different policies, we used the network 1 week before the Spring Festival (February 4, 2021) as the initial state, and then
constructed networks regarding different policies. The learned SEIR model was run on the constructed counterfactual networks
to examine the outcomes of different policies. As shown in Fig.2f and Fig.2h show the results and observations were as follows:
(a) With no interventions taken, where there are increases of √ó5.2 for rail transport, √ó8.9 for road transport, and √ó3.8 for air
transport during the spike period, and an increase of √ó2 for visits to community locations during the entire Chunyun period,
we observe a total number of 2,413 infections during the Chunyun season (February 4, 2021 to March 8, 2022); (b) With the
increase in transports reduced by half, and the increase in visits to community locations remaining √ó2, the number of infections
is decreased to 870; (c) The number of infections is further reduced to 418 if the increase in transport is reduced by three
quarters Œ∑ = 0.25; (d) If there is no intervention with traffic load, and we reduce visits to community locations by half, the
number of infections remains high (1,678); (e) With no increase in transport, visits to community locations must increase by
9.4 times to reach the number of infections in (d); (f) Restrictions on air transport have limited effects, but restrictions on
rail transport significantly decrease the number of infections. Due to the relatively high transport load by buses, restrictions
are also important, but less effective than those for rail travel. The explanations are twofold: (1) transportation facilitates
transmissions across cities, and spreads virus to cities that originally do not have infections; (2) Because transmission rates in
family households are consistently high and are generally unaffected by intervention policies, infections from transports can
consistently contribute to the infections through family households even when community locations are locked down.
3 https://en.wikipedia.org/wiki/Chinese_city_tier_system
4 http://qianxi.baidu.com/

5

medRxiv preprint doi: https://doi.org/10.1101/2021.04.08.21254953; this version posted April 25, 2021. The copyright holder for this preprint
(which was not certified by peer review) is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity.
It is made available under a CC-BY-NC-ND 4.0 International license .

Therefore, policies that discourage traveling by rail and road are crucial to avoid another wave of breakouts during the
Chunyun season. To compensate for the economic loss of traveling during the Chunyun season, restrictions on visits to
community locations can be loosened as they contribute substantiallty less to infections, compared with traveling.

6

medRxiv preprint doi: https://doi.org/10.1101/2021.04.08.21254953; this version posted April 25, 2021. The copyright holder for this preprint
(which was not certified by peer review) is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity.
It is made available under a CC-BY-NC-ND 4.0 International license .

Infection decrease, = 0.01
Death decrease, = 0.01

3
2

Infection decrease, = 0.1
Death decrease, = 0.1

50
40
30
20
10
0

10

20

30

40

50

60

70

80

The proportion of vaccine allocated to children and youths (%)
= 0.01

90

= 0.1
   

  
  

   

  

  

  

  

  

  
  

   
   
   

   
   
   

   
   
 7    
 D O O R K F H  S U R S        
 D W H G  R U W L R Q    
  W R  W L   R I  Y    
 H U    D F F    
 F L W L H  L Q H
 V   
 

  

 7
 D O O R K H  S
 F D W  U R S R
 H G   U W L
 W R  W  R Q 
 L H U   R I  Y
  F L W  D F F
 L H V  L Q H
   
 

   

 7
 D O O R K H  S
 F D W  U R S R
 H G   U W L
 W R  W  R Q 
 L H U   R I  Y
  F L W  D F F
 L H V  L Q H
   
 

e

   

   

   

   
   
   
 7
 D O O R K F H  S U R S        
   
 D W H G  R U W L R Q
  W R  W L   R I  Y    
 H U    D F F
   
   
 F L W L H  L Q H
 V   
 

  

  

 , Q I H F W L R Q  G H F U H D V H    

   
   

  

  

   

   

2

Infection decrease, = 0.01
Death decrease, = 0.01

1
0

0

10

   

tier2

40

50

60

youths
female children

Optimal distribution of vaccine allocation
for reducing 52.6% infections, = 0.1
tier3

20
0

11

20

30

40

50

60

male

youths
female children

70

80

The proportion of vaccine allocated to adults (%)
(adults % + seniors % = 1)

90

100

Restaurant and supermarket
Other local locations
Transportations

60
40
20

10

25

50

75

The proportion of vaccinated population (%)

Optimal distribution of vaccine allocation
for reducing 10.5% deaths, = 0.01
tier3

12.5
10.0

tier1
seniors
adults

male

youths
female children

Optimal distribution of vaccine allocation
for reducing 78.1% deaths, = 0.1

18

tier3

16

7.5
5.0
2.5
0.0

17.5
15.0

12

tier2

10

12.5
10.0
7.5

6

tier1
seniors
adults

4
2
0

20.0
15.0

tier2

5
0

100

17.5

15

8

tier1
seniors
adults

100

Infection decrease, = 0.1
Death decrease, = 0.1

10

14

tier2

90

30

20

Proportion of allocated vaccine (%)

male

80

40

10

tier1
seniors
adults

70

50

0

   

tier3

30

  

   

Optimal distribution of vaccine allocation
for reducing 7.4% infections, = 0.01

20

60

d 80

   
   

3

100

 , Q I H F W L R Q  G H F U H D V H    

0

4

Proportion of allocated vaccine (%)

0
60

Infection and death decrease (%)

1

5

Proportion of allocated vaccine (%)

4

6

Infection decrease (%)

5

Proportion of allocated vaccine (%)

Infection and death decrease (%)

c

6

Infection and death decrease (%)

b
Infection and death decrease (%)

a

male

youths
female children

5.0
2.5
0.0

Figure 3: a, Given a limited number of vaccines, children and youths should be vaccinated last: as the proportions of vaccinated
children and youths increases, we observe lower infection/death decrease. If all vaccines are allocated to children and youths,
the infection decrease is 0.43% for Œ± = 0.01, and 5.1% for Œ± = 0.1. For deaths, the decrease is 0.14% for Œ± = 0.01, and 2.0%
for Œ± = 0.1. b, The effects of vaccine allocation between adults and seniors. When optimizing for the number of infections,
for both situations where Œ± = 0.01 and Œ± = 0.1, all vaccines should be allocated to adults, achieving a decrease of 2.93%
in total infections for Œ± = 0.01, and a decrease of 37.3% for Œ± = 0.01. When optimizing for the number of deaths, when
senior
Œ± = 0.01, the largest decrease of deaths is obtained when padult
vaccine and pvaccine are respectively set to 0.1 and 0.9, leading to a
senior
total decrease of 4.52% in the number of deaths. When Œ± = 0.1, the largest decrease is obtained when padult
vaccine and pvaccine are
respectively set to 0.3 and 0.7, leading to a total decrease of 57.2%. c, People from cities in the second and third tiers should be
third
the first to receive the vaccine. The greatest infection decrease occurs when psecond
vaccine = pvaccine for both Œ± = 0.01 and Œ± = 0.1.
d, Vaccinating traveling populations is the most effective means of reducing the proportion of infections. People who travel
frequently should therefore be vaccinated first. People who visit restaurants and supermarkets should be vaccinated second. For
the remaining community locations, vaccinating visitors is less effective. e, Combining age, sex, and economic tiers of cities,
when Œ± = 0.01%, the optimal combination leads to a decrease of 7.4% in the number infections, where female adults from
tier3 cities receive the largest (23%) proportion of vaccines, and to a decrease of 10.5% in the number of deaths, where male
seniors from tier3 cities receive the largest (21%) proportion of vaccines. When Œ± = 0.10%, the optimal combination leads to a
decrease of 52.6% in the number of infections, where female adults from tier3 cities receive the largest (18%) proportion of
vaccines, and to a decrease of 78.1% in the number of deaths, where male seniors from tier2 cities receive the largest (19.5%)
proportion of vaccines.
7

medRxiv preprint doi: https://doi.org/10.1101/2021.04.08.21254953; this version posted April 25, 2021. The copyright holder for this preprint
(which was not certified by peer review) is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity.
It is made available under a CC-BY-NC-ND 4.0 International license .

Effective COVID-19 Vaccine Delivery Due to the supply shortage of vaccine supply, it is important to design effective
vaccine delivery strategies to effectively allocate vaccines across population groups e.g., age, sex and city. V E denotes vaccine
efficacy, which is the proportionate reduction in disease attack rate (AR) between the unvaccinated (ARU) and vaccinated
(ARV) groups: V E = 1 ‚àí ARU/ARV . In the SEIR model, vaccine interferes with the transitioning stage from susceptible to
exposed, where the transmission rate is reduced from Œ≤ to Œ≤(1 ‚àí V E). We set the VE value for the general Chinese population
to 0.92 [26].
The problem of finding the optimal vaccine delivery strategy can be transformed to an optimization problem, where given a
fixed number of vaccines smaller than the population, we search for the optimal vaccine allocation {pm
vaccine } over different
population groups {m}, leading to the minimum number of infections or deaths. Let pm
denote
the
proportion of m in
population
pm

√óN

the overall population. For category m, the proportion of population within m receiving the vaccine is pmvaccine √óNvaccine
. Setting
population
population
a reduction in the number of deaths as the objective, different fatality rates (probability of dying if infected by the virus) for
different age groups should be considered. The fatality rates fm for children, youths, adults and seniors are respectively set to
0.015%, 0.03%, 1.2% and 11.2%, respectively [27].
Vaccine Allocation among Different Age Groups We first explored the distribution of vaccine delivery over different age
groups by conducting simulations. Let Œ± denote the ratio between the total number of vaccines and the population size.
Œ± = 0.01 means 1% of the population can be vaccinated. Fig3.a shows that given limited number of vaccines, children and
youth
youths should be the last to be vaccinated: as the proportion of children and youths (pchild
vaccine + pvaccine ) increases, we observe
smaller decrease in infections/death. Specifically, if all vaccines are allocated to children and youths, the total number of
infections decreases by 0.43% for Œ± = 0.01 and 5.1% for Œ± = 0.1. For deaths, the decrease are 0.14% for Œ± = 0.01, and
2.0% for Œ± = 0.1 when all vaccines are allocated to youths and children. Because the fatality rates for children and youths
are extremely low, the decrease in deaths is actually caused by the decrease in death of from adults and seniors coming into
contact with children and youths. Fig3.b shows results for allocations between adults and seniors. When optimizing for the
number of infections, as can be seen, for both Œ± = 0.01 and Œ± = 0.1, all vaccines should be allocated to adults, achieving
an optimal decrease of 2.93% of total infections for Œ± = 0.01, and a decrease of 37.3% for Œ± = 0.1. This is because adults
contribute more to the spread of virus due to their high levels of activity and mobility. When optimizing for the number of
deaths, the outcome is different: although adults contribute more to the spread, compared with seniors, they have a significantly
lower fatality rate. The best strategy should involve a tradeoff between slowing virus transmission (and thus vaccinating adults)
and considering the high fatality rate for seniors (and thus vaccinating seniors). As shown in the figure, when Œ± = 0.01, the
senior
largest decrease of deaths is obtained when padult
vaccine and pvaccine are respectively set to 0.1 and 0,9, respectively, leading to a total
senior
decrease of 4.52% in number of deaths. When Œ± = 0.1, the largest decrease in deaths is obtained when padult
vaccine and pvaccine are
respectively set to 0.3 and 0.7, leading to a total decrease of 57.2% in the number of deaths.
Vaccine Allocation among Cities of Different Economic Tiers Assuming that the age distribution is identical in cities of
different tiers , we searched for the optimal distribution for vaccine delivery over cities of different economic tiers, namely,
second
third
{pfirst
vaccine , pvaccine , pvaccine }. As can be seen from Figure 3c, we find that people from cities in the second and third tiers should be
the first to receive the vaccine. We postulate that this is because tier1 cities have a stricter mask-wearing, temperature-testing,
third
and traveler quarantine policies. The greatest decrease in infection occurs when psecond
vaccine = pvaccine .
Vaccine Allocation between Males and Females On one hand, males have higher infection and fatality rates, and higher
mobility, indicating that males should be vaccinated first. On the other hand, females tend to exhibit a greater immune response
that can facilitate vaccine efficacy, indicating that vaccinating females is more effective given limited vaccine availability. Based
on our simulation results, where the VE of females is set to 1.2-fold greater than that of males [28] we found that the influence
of vaccine distribution according to sex is minimal. For Œ± = 0.01, the decreases in total infections are 1.89% and 1.92% when
all vaccines are given to males and females, respectively. For Œ± = 0.1, the decreases in the number of deaths are 2.34% and
2.29% when all vaccines are given to males and females, respectively.
Vaccine Allocation based on Location Because we do not have precise statistics for plocation
population , here we only evaluate the
impact of vaccinating certain proportions of the population visiting different location categories. The locations are divided into
three categories, restaurants+supermarkets, other community locations, and transportation. As shown in Fig.3d, vaccinating the
traveling population is the most effective means of reducing the proportion of general infections. People who travel frequently
should therefore be vaccinated first. People who visit restaurants and supermarkets should be vaccinated second. People who
visit restaurants and supermarkets should be vaccinated second. For the remaining community locations, vaccinating visitors is
less effective.

8

medRxiv preprint doi: https://doi.org/10.1101/2021.04.08.21254953; this version posted April 25, 2021. The copyright holder for this preprint
(which was not certified by peer review) is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity.
It is made available under a CC-BY-NC-ND 4.0 International license .

Combining Age, sex and Economic Tiers of Cities Fig.3e shows the distributions of vaccines allocated to different
population groups considering age, sex and city tiers to achieve the minimum numbers of infections and deaths. When
Œ± = 0.01%, the optimal combination leads to a decrease of 7.4% in infections, where female adults from tier3 cities receive
the largest (23%) proportion of vaccines, and to a decrease of 10.5% in deaths, where male seniors from tier3 cities receive
the largest (21%) proportion of vaccines. When Œ± = 0.10%, the optimal combination leads to a decrease of 52.6% infections,
where female adults from tier3 cities receive the largest (18%) proportion of vaccines, and to a decrease of 78.1% deaths, where
male seniors from tier2 cities receive the largest (19.5%) proportion of vaccines.
Discussion This study has several limitations. First, the analyzed dataset has selection bias. Available action tracking reports
are all from the time period after April 2021 when there were only sporadic breakouts in China. Reports during the first wave
of outbreaks in January and February 2021 are not available, when there are substantially large numbers of confirmed cases,
are not available. Therefore, the results of this study are limited with regard to both location and time. Second, because we
were only able to collect reports for only a proportion of the confirmed patients, important aspects might have been missed:
for example, since reports for international travelers were not available and were therefore excluded from the dataset. Thus,
the observation that flight is a relatively safe means of transportation is limited to domestic flights and cannot be extended to
international flights. Third, because all data were collected after April 2021 in China, the results and conclusions of this study
are limited to the situation where the pandemic is generally well-contained, and mask-wearing and temperature testingare
generally adopted. Therefore, the results cannot be readily generalized to situations with high rates of new daily cases.
Despite these limitations, this work presents the first attempt to analyze the detailed action reports of confirmed cases with
comprehensive tracking information, and captures important aspects of transmission of SARS-CoV-2, such as community
location, sex, age and city tiers. Capturing these aspects leads to high predictive accuracy, which demonstrates the superiority
of the approach. Our results provide insights for control and contact tracing policies. For example, our results suggest that
policies regarding limitations on visits to different location categories should be different, and that more limitations should
be placed on locations where the mask-wearing cannot be strictly enforced such as restaurants. Regarding contact tracing
policies, our results suggest that more emphasis should be placed on tracing people who visit restaurants with confirmed cases.
Our results also provide suggestions on policies regarding different demographic groups and cities. For example, for daily
essential visits, such as those involving grocery stores, policies should encourage visits by children and youths, rather than by
adults and seniors. More importantly, our research provides a statistical foundation for vaccine delivery under conditions of
vaccine shortage. Our work will be helpful in designing effective policies regarding interventions, reopening, contact tracing
and vaccine delivery in the ‚Äúnew normal‚Äù world following COVID-19 spread.

2

Methods

2.1 Datasets
Action tracking reports are publicly available, and were originally published to the public by provincial Centers for Disease
Control and Prevention to warn local residents of locations that confirmed patients had been to, and were broadcast by
newspapers and on online social media. 5 Patients‚Äô names are anonymized in the reports.
5 Examples: action tracking reports for diagnosed patients on Jan.19 2021 in the Heilongjiang province, found on the website of Heiongjiang CDC:
http://wsjkw.hlj.gov.cn/pages/601a043b4ed1dc8e06c86a10; action tracking reports for diagnosed patients on Jan 5, 2021 in the Hebei
province, found on the website of Heibe CDC: http://wsjkw.hebei.gov.cn/syyctplj/375192.jhtml.

9

medRxiv preprint doi: https://doi.org/10.1101/2021.04.08.21254953; this version posted April 25, 2021. The copyright holder for this preprint
(which was not certified by peer review) is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity.
It is made available under a CC-BY-NC-ND 4.0 International license .

Province

url

Province

url

Beijing
Shanxi
Liaoning
Heilongjiang
Jiangsu
Anhui
Jiangxi
Hebei
Hubei
Guangdong
Hainan
Sichuan
Yunnan
Gansu
Ningxia
Tibet

http://wjw.beijing.gov.cn/
http://wjw.shanxi.gov.cn/
http://wsjk.ln.gov.cn/index.html
http://wsjkw.hlj.gov.cn/
http://wjw.jiangsu.gov.cn/
http://wjw.ah.gov.cn/
http://hc.jiangxi.gov.cn/
http://wsjkw.hebei.gov.cn
http://wjw.hubei.gov.cn/
http://wsjkw.gd.gov.cn/
http://wst.hainan.gov.cn/swjw/index.html
http://wsjkw.sc.gov.cn/
http://ynswsjkw.yn.gov.cn/wjwWebsite/web/index
http://wsjk.gansu.gov.cn/
http://wsjkw.nx.gov.cn/
http://wjw.xizang.gov.cn/

Tianjin
Nei Monggol
Jilin
Shanghai
Zhejiang
Fujian
Shandong
Henan
Hunan
Guangxi
Chongqing
Guizhou
Shaanxi
Qinghai
Xinjiang

http://wsjk.tj.gov.cn/
http://wjw.nmg.gov.cn/
http://wsjkw.jl.gov.cn/
http://wsjkw.sh.gov.cn/
https://wsjkw.zj.gov.cn/
http://wjw.fujian.gov.cn/
http://wsjkw.shandong.gov.cn/
http://wsjkw.henan.gov.cn/
http://wjw.hunan.gov.cn/
http://wsjkw.gxzf.gov.cn/
http://wsjkw.cq.gov.cn/
http://www.gzhfpc.gov.cn/
http://sxwjw.shaanxi.gov.cn/
http://wsjkw.qinghai.gov.cn/
http://wjw.xinjiang.gov.cn/

Table 1: Website URLs of 31 (all except Taiwan) provincial Centers for Disease Control and Prevention in China.
We collected action tracking reports from the websites of provincial Centers for Disease Control and Prevention. We first
obtained all contents posted on the websites of 31 (all except Taiwan) provincial Centers for Disease Control and Prevention in
China since Jan 2020, as shown in Tab.1. Posts with titles containing the keyword ‚ÄúËΩ®Ëøπ‚Äù are retrained, with the rest contents
discarded. The remaining posts were further manually examined, and texts chunks corresponding to tracking details were
selected. We are able to identify tracking reports for 1,752 patients. The anonymized data are then transformed to obtain
population-level statistics, and the research is not based on information at the individual level.

2.2 NLP Tools to Transform Unstructured Action Reports to Structured Networks
We use NLP models to extract locations, time and relations between them. We manually labeled 10 percent of the reports by
identifying containing locations, times, and whether a specific time corresponds to the patient visits a specific location. Based
on labeled data, we train NLP models to extract locations, time and relations from the unlabeled data. We use BERT [29] as the
model backbone. Extracted entities and relations will be further verified by human annotators. This process saves the efforts to
label the entire corpus.
Model training. The input text sequence x = {x1 , ¬∑ ¬∑ ¬∑ , xn } contains various entities such as time and locations. For example,
if the input sequence is x = {On, January, 2, she, did, not, go, out}, then ‚ÄúJanuary 2‚Äù is an entity of type time, ‚Äúshe‚Äù is an entity
of type person. These entities should be extracted from the input text sequence. To this end, we adopt the BIEOS scheme
to predict the label for each of the input units. B, I, E, O and S respectively stand for ‚ÄúBeginning‚Äù, ‚ÄúIntermediate‚Äù, ‚ÄúEnd‚Äù,
‚ÄúOutside‚Äù and ‚ÄúSingle‚Äù, and they are combined with each of the pre-defined entity types. Take the time type as an example. All
the labels regarding time are B-TIME, I-TIME, E-TIME, O and S-TIME. If there are m different entity types, there will be a
total number of k = 4m + 1 labels, forming the label set Y. The model assigns one label from Y to each input unit xi based on
whether it is part of an entity and which entity it belongs to. In the example of x = {On, January, 2, she, did, not, go, out}, the
ground-truth label sequence is {yÃÇ1 , yÃÇ2 , yÃÇ3 , yÃÇ4 , yÃÇ5 , yÃÇ6 , yÃÇ7 , yÃÇ8 } = {O, B-TIME, E-TIME, S-PERSON, O, O, O, O}, which means
‚ÄúJanuary‚Äù is the beginning of a time entity and ‚Äú2‚Äù is the end of the time entity, along with ‚Äúshe‚Äù being a single person entity.
We encode the ground-truth label yÃÇi into a one-hot vector yÃÇi of length k, where the dimension for the corresponding label is 1
and other dimensions are 0. With the ground-truth one-hot label vector yÃÇi for each input text unit and the label distribution
vector yi , we can train the model using the cross entropy loss:
CE(yi , yÃÇi ) = ‚àí

k
X

yÃÇi,j log yi,j

(1)

j=1

We use Adam[30] to optimize the loss. Besides entities, we also consider location-time relations, i.e., whether a location entity
el is associated with a time entity et , signifying that the person visited location l at time t. To this end, we first represent each
extracted entity e by concatenating the high-dimensional vector representation of its head unit he.h and that of its tail unit he.t ,
and then we transform the result using a learnable matrix Wr , which gives the final entity-specific vector representation re :
re = Wr [he.h ; he.t ]

10

(2)

medRxiv preprint doi: https://doi.org/10.1101/2021.04.08.21254953; this version posted April 25, 2021. The copyright holder for this preprint
(which was not certified by peer review) is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity.
It is made available under a CC-BY-NC-ND 4.0 International license .

To determine the relation between a location entities el and a time entity et , we apply dot-product to their entity-specific vector
representations rel and rer followed by the sigmoid function to obtain the probability that el and et should be associated:
p(y = 1|el , et ) = sigmoid(r>
el ret )

(3)

The ground-truth label y for a location-time pair is either 0 (no association) or 1 (association), and therefore the model can be
trained using the binary cross entropy loss:
CE(y, p) = ‚àí[y ¬∑ log p + (1 ‚àí y) ¬∑ log(1 ‚àí p)]

(4)

Note that during the location-time decision process, only the learnbale matrix Wr is trained and the base entity extraction
model is fixed after trained with Eq.1.

2.3 The SEIR Model
2.3.1 Learning
To model the spread of SARS-CoV-2, we use a standard SEIR model with susceptible (S), exposed (E), infectious (I) and
recovered (R) states. We follow the standard paradigm for the SEIR model, where a susceptible case is transformed to an
exposed case through their contact at location C with the transmission rate Œ≤C . The exposed state denotes the incubation period
during which individuals are infected but are not yet infectious. An exposed case transitions to an infectious case at a rate
proportional to the inverse of mean incubation period. Once an individual enters the infectious state, it can spread the virus to
susceptible cases. An infectious case transitions to a recovered case at a rate proportional to the inverse of mean infectious
period. Once the transition happens, the individual can not get infected or infect others.
For a specific location c of category C, we use the group of people that visits location c at time tvisit as the basic unit for
modeling and trace their actions and disease status. This group of people is denoted by Dtcvisit . The size of Dtcvisit is denoted
by Ntcvisit . Since we postulate that virus transmission only happens at locations confirmed patients have been to, we only need
to model people groups t . Among the 1,752 confirmed patients, we collected 7.5k location-time pairs. Since infections are
generally sparse, we further postulate that, for group Dtcvisit , all transitions from S to E in the group happen at location c at time
t. This means that for a susceptible person in Dtcvisit , if he does not transition to the exposed state at location c at time t, he will
not get infected in the future.
Since the time each patient being diagnosed is included in and can be extracted from the action tracking reports, we can
obtain the number of newly diagnosed (confirmed) cases that have visited location c at time t, denoted by Qct . It is worth noting
that Qct is not the same as Itc , where Itc is the number of infections reported at time t that have been to location c. This is
because a patient cannot be diagnosed right after it becomes infectious. We use I c to denote the number of total infections that
have been to location c, to bridge the gap between Qct and Itc :
X
X X
Qct = I c =
Itcvisit (t)
(5)
t

tvisit t‚â•tvisit

Stcvisit (t), Etcvisit (t), Itcvisit (t), Rtcvisit (t) respectively denote the number of susceptible (S), exposed (E), infectious (I) and recovered
(R) cases at time t ‚â• tvisit within group Dtcvisit . Based on the assumption that virus transmission for Dtcvisit only happens at time t
at location c, transitions from susceptible cases to exposed cases only happen at time tvisit . For time t = tvisit , we have:
‚àÜStcvisit (t) = ‚àíŒ≤c
‚àÜEtcvisit (t)

Stcvisit (t)Itcvisit (t)
Ntcvisit

S c (t)I c (t)
= Œ≤c tvisit c tvisit
‚àí Œ≥Etcvisit (t)
Ntvisit

(6)

Since we have made the assumption that infections only take place at time t, we thus have IÀÜtcvisit = ‚àÜStcvisit (t).
2

Loss =

X

c

I ‚àí

c

X

IÀÜtcvisit

(7)

tvisit

To fit the number of confirmed cases visiting location c, we use grid search to search the combination of parameters Œ≤c . The
optimal value of Œ≤c is obtained with the smallest L2 loss between the number of reported cases I c and the sum of predicted
infections Itc :
11

medRxiv preprint doi: https://doi.org/10.1101/2021.04.08.21254953; this version posted April 25, 2021. The copyright holder for this preprint
(which was not certified by peer review) is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity.
It is made available under a CC-BY-NC-ND 4.0 International license .

Baseline A straightforward baseline is to ignore location-level statistics and demographic factors provided by action reports,
where predictions on city-level confirmed cases are made only based on mobility data. The model is trained to minimize the L2
distance between the number of city-level confirmed cases and the predicted number:
2

Loss = Icity ‚àí

X

t
IÀÜcity

(8)

t

In this way, the system degenerates into the system similar to [20], where only mobility data is used for modeling. As shown
in Fig.1d, the baseline model significantly underperforms the proposed model that is based on location-level statistics and
demographic factors in terms of prediction accuracy.
Validation. For model validation, we first split the time period from March 2020 to January 2021 into consecutive time
snippets, with the size of stride set to a week. Each of the snippets lasts a month. We divide all snippets to 80%/20% for training
and test, where we train the model based on the 80% snippets, and evaluate the predictive accuracy on the held-out test snippets.
As shown in Fig.1d, the used model fits held-out data pretty well, significantly outperforming baseline models.
2.3.2 Age-focused SEIR Model
Let m denote the index of the age group, which tasks a value from the age group set Age = {child, youth, adult, senior}. Qct (m)
denotes the number of newly confirmed cases at time t belonging to age group m that have been to location c. Qct (m) can be
readily computed based on action reports. Let I c (m) denote the number of infections belonging to age group m that have been
to location c. We have:
X
X X
Qct (m) = I c (m) =
Itcvisit (t, m)
(9)
t

tvisit t‚â•tvisit

For each location c, transmission rates for different age groups are different, denoted by Œ≤cm , where m denotes the index of
an age group. Stcvisit (t, m), Etcvisit (t, m), Itcvisit (t, m), Rtcvisit (t, m) respectively denote the number of susceptible (S), exposed (E),
infectious (I) and recovered (R) cases at time t ‚â• tvisit within group Dtcvisit belonging to age group m. The age-focused SEIR
model is given as follows. For time t = tvisit , we have:
‚àÜStcvisit (t, m) = ‚àíŒ≤cm
‚àÜEtcvisit (t, m) = Œ≤cm

Stcvisit (t, m)Itcvisit (t)
Ntcvisit

Stcvisit (t, m)Itcvisit (t)
‚àí Œ≥‚àÜEtcvisit (t, m)
Ntcvisit

(10)

Again, since we have made the assumption that infections only take place at time t, we have Itcvisit (m) = ‚àÜStcvisit (t, m). Here
we assume that the incubation period and the infectious period for all ages are the same, Similar to the previous section, we use
grid search to search the combination of parameters Œ≤cm to fit the number of confirmed cases that have visited location c of age
group m:
2
XX
X
c
c
Itvisit (m)
Loss =
I (m) ‚àí
(11)
c

m

tvisit

2.4 Simulations
Given learned parameters Œ≤ for different locations, city tiers and age groups, we can perform simulations based on graphs. Our
simulations are performed on graphs with to 100 million nodes of individuals to best simulate the scenario in China. Nodes of
individuals are first clustered into cities of three tiers. Individuals in the same city are connected through time-varying edges
indicating visiting the same community location at a specific time, and covid is spread with location-specific and city-specific
transmission rates in different locations and cities. Individuals in different cities are connected through time-varying edges
indicating transportations, and covid is spread with transportation-specific transmission rates. Simulations were performed on
platforms of high performance computing with thousands of cores and terabytes of RAM. During simulations, we use the SEIR
model to simulate the status of each individual node.
For each individual node s, let state(s) denote its corresponding state, taking the value from S, E, I, R, which respectively
corresponds to the susceptible, exposed, infectious and removed state. For a susceptible node s, if it visits location C at the
time t, the probability of transitioning to stage E is given by:
Ict
Nct
state(s) = Binom(S ‚Üí E)
p(S ‚Üí E) = Œ≤C

12

(12)

medRxiv preprint doi: https://doi.org/10.1101/2021.04.08.21254953; this version posted April 25, 2021. The copyright holder for this preprint
(which was not certified by peer review) is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity.
It is made available under a CC-BY-NC-ND 4.0 International license .

where Ict and Nct respectively denote the number of infectious nodes and the total number of nodes visiting C. If city-tiers and
age are consider, city-tier specific and age group specific Œ≤ will be used. For simplification, we use time-consistent Nct for
different locations, which are obtained by averaging the number of to locations belonging to the same location type based on
the SmartStep data. For exposed and infectious nodes, the probabilities of transitioning to infectious and removed states are
given as follows:
p(E ‚Üí I) = Œ≥
state(s) = Binom(E ‚Üí I)
(13)
p(I ‚Üí R) = Œ∑
state(s) = Binom(I ‚Üí R)
Œ≥ and Œ∑ are the inverse of average incubation period and infectious period, which are respectively 96h and 84h [10].
R0 Estimation. Let R0 denote the reproduction number for the whole population, and RC denotes the average number of
secondary patients in location category C caused by a patient. RC can be estimated directly from the dataset. Let HC the
total number of patients that have been to category location C. For a patient p ‚àà HC , let VpC denote the collection of visits of
patient p to locations of type C. For each visit v ‚àà VpC , let N (v) denote the number of confirmed patients occurring at the
same location and at the same time. RC is computed as follows:
P
P
0.5 √ó p‚ààHC v‚ààV C N (v)
p
P
RC =
(14)
C|
|V
p
p‚ààHC
R0 is computed by summing RC with weight FC :
R0 =

X

FC RC

(15)

C

where Fc denotes the average number of a patient visiting location category C. We can directly estimate Rc and Fc from the
action report dataset. The value of R0 in this work is 0.37.
For age group, let Rm denote the reproduction rate for age category m, which is the average number of secondary patients
belonging to age group m caused by a patient. Rm for children, youths, adults and seniors are respectively 0.012, 0.028, 0.21,
0.12. Rm is highly correlated with the total population of each age category.

2.5 Simulations For Vaccine Delivery
Let Nvaccine and Npopulation denote the number of available vaccine doses and the size of population. Here we make a
simplification that each person only needs one dose. Let M denote the set of categories on which vaccines are distributed.
It can be sex, age or city tiers. Take age as an example, M = {child, youth, adult, senior}. m takes one of the values from
M . pm
vaccine denotes the distribution of vaccine, where the number of children, youths, adults and seniors got vaccinated is
m
pchild √ó Nvaccine , pyouth √ó Nvaccine , padult √ó Nvaccine , and psenior
vaccine √ó Nvaccine . Let ppopulation denote the proportion of m in the whole
population. For category m, the proportion of population within m getting vaccinated is thus

pm
vaccine √óNvaccine
.
pm
population √óNpopulation

Considering that

the value of V E can be different for different age categories, the age-specific transmission rate Œ≤m is reduced to Œ≤m (1 ‚àí V Em ),
where V Em denotes the age specific vaccine efficacy. The task of identifying the best vaccine delivery strategy is transformed
to an optimization problem. If the objective is minimizing the number of infections, the problem is formalized as follows:
minimize I : {pm
vaccine }
m ‚àº Binomial

pm
vaccine √ó Nvaccine
m
ppopulation √ó Npopulation

0
Œ≤m
= Œ≤m (1 ‚àí V Em ) if m = 1
0
Œ≤m = Œ≤m if m = 0
X
s.t.
pm
vaccine = 1
m

13

!

(16)

medRxiv preprint doi: https://doi.org/10.1101/2021.04.08.21254953; this version posted April 25, 2021. The copyright holder for this preprint
(which was not certified by peer review) is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity.
It is made available under a CC-BY-NC-ND 4.0 International license .

If the objective is minimizing the number of death, age-specific death rates should be considered. The problem is formalized as
follows:
X
minimize
Il fl : {pm
vaccine }
l‚ààage

m ‚àº Binomial

pm
vaccine √ó Nvaccine
m
ppopulation √ó Npopulation

!

0
Œ≤m
= Œ≤m (1 ‚àí V Em ) if m = 1
0
Œ≤m = Œ≤m if m = 0
X
s.t.
pm
vaccine = 1

(17)

m

To identify the optimal values of
number of infections and deaths.

3

{pm
vaccine },

we perform simulations using grid search to obtain the best set of {pm
vaccine } for the

Data availability

All the action reports used in this work are publicly available on the websites of provincial centers for Disease Control and
Prevention (as listed in the Dataset subsection). Code for accessing the contents of corresponding websites and context filtering
will be provided upon publication. The final action tracking report dataset will be released upon publication. The SmartStep
data are from a commercial product, owned by the third party, and will be available from the corresponding author upon
reasonable request.

4

Code availability

Data analysis was performed using Python and Lua. Code is available at https://github.com/ShannonAI/action_
tracking_report.

References
[1] Chinazzi, M. et al. The effect of travel restrictions on the spread of the 2019 novel coronavirus (covid-19) outbreak.
Science 368, 395‚Äì400 (2020).
[2] Prem, K. et al. The effect of control strategies to reduce social mixing on outcomes of the covid-19 epidemic in wuhan,
china: a modelling study. The Lancet Public Health 5, e261‚Äìe270 (2020).
[3] Flaxman, S. et al. Estimating the effects of non-pharmaceutical interventions on covid-19 in europe. Nature 584, 257‚Äì261
(2020).
[4] Kraemer, M. U. et al. The effect of human mobility and control measures on the covid-19 epidemic in china. Science 368,
493‚Äì497 (2020).
[5] Pan, A. et al. Association of public health interventions with the epidemiology of the covid-19 outbreak in wuhan, china.
Jama 323, 1915‚Äì1923 (2020).
[6] Costantino, V., Heslop, D. J. & MacIntyre, C. R. The effectiveness of full and partial travel bans against covid-19 spread
in australia for travellers from china during and after the epidemic peak in china. Journal of travel medicine 27, taaa081
(2020).
[7] Ali, S. T. et al. Serial interval of sars-cov-2 was shortened over time by nonpharmaceutical interventions. Science 369,
1106‚Äì1109 (2020).
[8] Sun, K. et al. Transmission heterogeneities, kinetics, and controllability of sars-cov-2. Science 371 (2021).
[9] Guzzetta, G. et al. Impact of a nationwide lockdown on sars-cov-2 transmissibility, italy. Emerging infectious diseases 27,
267 (2021).

14

medRxiv preprint doi: https://doi.org/10.1101/2021.04.08.21254953; this version posted April 25, 2021. The copyright holder for this preprint
(which was not certified by peer review) is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity.
It is made available under a CC-BY-NC-ND 4.0 International license .

[10] Li, R. et al. Substantial undocumented infection facilitates the rapid dissemination of novel coronavirus (sars-cov-2).
Science 368, 489‚Äì493 (2020).
[11] Pei, S. & Shaman, J. Initial simulation of sars-cov2 spread and intervention effects in the continental us. MedRxiv (2020).
[12] Aleta, A. et al. Modelling the impact of testing, contact tracing and household quarantine on second waves of covid-19.
Nature Human Behaviour 4, 964‚Äì971 (2020).
[13] Block, P. et al. Social network-based distancing strategies to flatten the covid-19 curve in a post-lockdown world. Nature
Human Behaviour 4, 588‚Äì596 (2020).
[14] Karin, O. et al. Cyclic exit strategies to suppress covid-19 and allow economic activity. medRxiv (2020).
[15] Firth, J. et al. Using a real-world network to model localized covid-19 control strategies. Nature Medicine 26 (2020).
[16] Charoenwong, B., Kwan, A. & Pursiainen, V. Social connections with covid-19‚Äìaffected areas increase compliance with
mobility restrictions. Science advances 6, eabc3054 (2020).
[17] Gallotti, R., Valle, F., Castaldo, N., Sacco, P. & De Domenico, M. Assessing the risks of ‚Äòinfodemics‚Äô in response to
covid-19 epidemics. Nature Human Behaviour 4, 1285‚Äì1293 (2020).
[18] Lee, M. et al. Human mobility trends during the early stage of the covid-19 pandemic in the united states. PLoS One 15,
e0241468 (2020).
[19] Xiong, C., Hu, S., Yang, M., Luo, W. & Zhang, L. Mobile device data reveal the dynamics in a positive relationship
between human mobility and covid-19 infections. Proceedings of the National Academy of Sciences 117, 27087‚Äì27089
(2020).
[20] Chang, S. et al. Mobility network models of covid-19 explain inequities and inform reopening. Nature 589, 82‚Äì87 (2021).
[21] Perra, N. Non-pharmaceutical interventions during the covid-19 pandemic: A review. Physics Reports (2021).
[22] Lai, S. et al. Effect of non-pharmaceutical interventions to contain covid-19 in china. Nature 585, 410‚Äì413 (2020).
[23] Badr, H. S. et al. Association between mobility patterns and covid-19 transmission in the usa: a mathematical modelling
study. The Lancet Infectious Diseases 20, 1247‚Äì1254 (2020).
[24] Tian, H. et al. An investigation of transmission control measures during the first 50 days of the covid-19 epidemic in
china. Science 368, 638‚Äì642 (2020).
[25] Watts, D. J., Muhamad, R., Medina, D. C. & Dodds, P. S. Multiscale, resurgent epidemics in a hierarchical metapopulation
model. Proceedings of the National Academy of Sciences 102, 11157‚Äì11162 (2005).
[26] Zhang, Y. et al. Safety, tolerability, and immunogenicity of an inactivated sars-cov-2 vaccine in healthy adults aged
18‚Äì59 years: a randomised, double-blind, placebo-controlled, phase 1/2 clinical trial. The Lancet Infectious Diseases 21,
181‚Äì192 (2021).
[27] Gao, X. & Dong, Q. A logistic model for age-specific covid-19 case-fatality rates. JAMIA open 3, 151‚Äì153 (2020).
[28] Bischof, E., Wolfe, J., Klein, S. L. et al. Clinical trials for covid-19 should include sex as a variable. The Journal of
clinical investigation 130 (2020).
[29] Devlin, J., Chang, M.-W., Lee, K. & Toutanova, K. Bert: Pre-training of deep bidirectional transformers for language
understanding. arXiv preprint arXiv:1810.04805 (2018).
[30] Kingma, D. P. & Ba, J. Adam: A method for stochastic optimization (2017).

15

